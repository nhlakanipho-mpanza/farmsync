<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-8 offset-md-2">
        <div class="card">
          <div class="card-header card-header-primary">
            <h4 class="card-title">{{ isEditMode ? 'Edit' : 'Add' }} Inventory Item</h4>
            <p class="card-category">{{ isEditMode ? 'Update' : 'Create' }} inventory item details</p>
          </div>
          <div class="card-body">
            <form [formGroup]="inventoryForm" (ngSubmit)="onSubmit()">
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput 
                           placeholder="Item Name" 
                           formControlName="name"
                           required>
                    <mat-error *ngIf="f.name.invalid && f.name.touched">
                      Name is required
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput 
                           placeholder="SKU (Optional)" 
                           formControlName="sku">
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <mat-form-field class="example-full-width">
                    <mat-label>Category</mat-label>
                    <mat-select formControlName="categoryId" required>
                      <mat-option *ngFor="let category of categories" [value]="category.id">
                        {{ category.name }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="f.categoryId.invalid && f.categoryId.touched">
                      Category is required
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-4">
                  <mat-form-field class="example-full-width">
                    <mat-label>Type</mat-label>
                    <mat-select formControlName="typeId" required>
                      <mat-option *ngFor="let type of types" [value]="type.id">
                        {{ type.name }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="f.typeId.invalid && f.typeId.touched">
                      Type is required
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-4">
                  <mat-form-field class="example-full-width">
                    <mat-label>Unit of Measure</mat-label>
                    <mat-select formControlName="unitOfMeasureId" required>
                      <mat-option *ngFor="let unit of units" [value]="unit.id">
                        {{ unit.name }} ({{ unit.abbreviation }})
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="f.unitOfMeasureId.invalid && f.unitOfMeasureId.touched">
                      Unit is required
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <mat-form-field class="example-full-width">
                    <input matInput 
                           type="number" 
                           placeholder="Minimum Stock Level" 
                           formControlName="minimumStockLevel"
                           required>
                    <mat-error *ngIf="f.minimumStockLevel.invalid && f.minimumStockLevel.touched">
                      Minimum stock level required
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-4">
                  <mat-form-field class="example-full-width">
                    <input matInput 
                           type="number" 
                           placeholder="Reorder Level" 
                           formControlName="reorderLevel"
                           required>
                    <mat-error *ngIf="f.reorderLevel.invalid && f.reorderLevel.touched">
                      Reorder level required
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-4">
                  <mat-form-field class="example-full-width">
                    <span matPrefix>R&nbsp;</span>
                    <input matInput 
                           type="number" 
                           placeholder="Unit Price (Optional)" 
                           formControlName="unitPrice">
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <mat-form-field class="example-full-width">
                    <textarea matInput 
                              placeholder="Description" 
                              formControlName="description"
                              rows="3"></textarea>
                  </mat-form-field>
                </div>
              </div>

              <div class="card-footer justify-content-end">
                <button type="button" 
                class="btn btn-danger btn-round"
                (click)="cancel()">
                Cancel
              </button>
              <button type="submit" 
                      class="btn btn-primary text-right btn-round"
                      [disabled]="loading || inventoryForm.invalid">
                <span *ngIf="!loading">{{ isEditMode ? 'Update' : 'Create' }}</span>
                <span *ngIf="loading">
                  <i class="fa fa-spinner fa-spin"></i> Saving...
                </span>
              </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
